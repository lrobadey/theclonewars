<div class="viewport__content">
    <div class="viewport__grid viewport__grid--two">
        <div class="panel viewport__panel">
            <div class="panel__title">FACTORIES | {{ vm.core.factory.factories }}/{{ vm.core.factory.max_factories }}
            </div>
            <div class="stat-row">
                <span class="stat-label">CAPACITY</span>
                <span class="stat-value">{{ vm.core.factory.capacity }} slots/day</span>
            </div>
            <div class="production__queues">
                <div class="production__queues-title muted">QUEUE</div>
                {% if vm.core.jobs %}
                <div class="production__queue-list">
                    {% for job in vm.core.jobs %}
                    <div class="production__queue-item">
                        <div class="production__queue-label">{{ job.label }}</div>
                        <div class="production__queue-meta muted">
                            ETA {{ job.eta }}d · {{ job.progress_pct }}% · {{ job.work_remaining }}/{{ job.work_total }}
                            slots
                            → {{ job.stop_at }}
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="muted">NO ACTIVE QUEUES</div>
                {% endif %}
            </div>

            <div class="panel__divider"></div>

            <div class="panel__title">BARRACKS | {{ vm.core.barracks.barracks }}/{{ vm.core.barracks.max_barracks }}
            </div>
            <div class="stat-row">
                <span class="stat-label">CAPACITY</span>
                <span class="stat-value">{{ vm.core.barracks.capacity }} slots/day</span>
            </div>
            <div class="production__queues">
                <div class="production__queues-title muted">QUEUE</div>
                {% if vm.core.barracks_jobs %}
                <div class="production__queue-list">
                    {% for job in vm.core.barracks_jobs %}
                    <div class="production__queue-item">
                        <div class="production__queue-label">{{ job.label }}</div>
                        <div class="production__queue-meta muted">
                            ETA {{ job.eta }}d · {{ job.progress_pct }}% · {{ job.work_remaining }}/{{ job.work_total }}
                            slots
                            → {{ job.stop_at }}
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="muted">NO ACTIVE QUEUES</div>
                {% endif %}
            </div>
        </div>
        <div class="panel viewport__panel">
            <div class="panel__title">CORE STOCKPILES</div>
            <div class="stockpile__section">
                <div class="stockpile__title muted">SUPPLIES</div>
                <div class="stat-row stat-row--supply">
                    <div class="supply-row">
                        <img src="/static/img/supply_ammo.png" alt="Ammo" class="supply-icon">
                        <span class="stat-label">AMMO</span>
                    </div>
                    <span class="stat-value accent">{{ vm.core.stockpiles.supplies.ammo }}</span>
                </div>
                <div class="stat-row stat-row--supply">
                    <div class="supply-row">
                        <img src="/static/img/supply_fuel.png" alt="Fuel" class="supply-icon">
                        <span class="stat-label">FUEL</span>
                    </div>
                    <span class="stat-value accent">{{ vm.core.stockpiles.supplies.fuel }}</span>
                </div>
                <div class="stat-row stat-row--supply">
                    <div class="supply-row">
                        <img src="/static/img/supply_meds.png" alt="Meds" class="supply-icon">
                        <span class="stat-label">MED/SPARES</span>
                    </div>
                    <span class="stat-value accent">{{ vm.core.stockpiles.supplies.med_spares }}</span>
                </div>
            </div>
            <div class="stockpile__section">
                <div class="stockpile__title muted">UNITS</div>
                <div class="stat-row">
                    <span class="stat-label">INFANTRY</span>
                    <span class="stat-value">{{ vm.core.stockpiles.units.infantry }}</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">WALKERS</span>
                    <span class="stat-value">{{ vm.core.stockpiles.units.walkers }}</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">SUPPORT</span>
                    <span class="stat-value">{{ vm.core.stockpiles.units.support }}</span>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="viewport__hud">
    {% set hud = vm.core.hud %}
    {% include "panels/hud.html" %}
</div>